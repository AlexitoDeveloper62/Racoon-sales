<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Racon Multiservice</title>
<style>
body {margin:0; font-family:Arial,sans-serif; background-color:#f4f4f4; color:#333;}
header {background-color:#2c3e50; color:white; padding:2rem 1rem; text-align:center;}
h1 {margin:0; font-size:2.2rem;}
main {max-width:1100px; margin:2rem auto; padding:0 1rem;}
.gallery {display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:1.5rem;}
.card {background-color:white; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1); padding:1rem; text-align:center; position:relative; transition:transform 0.3s ease, box-shadow 0.3s ease; z-index:0;}
.card img {max-width:100%; height:180px; object-fit:contain; border-radius:6px; margin-bottom:1rem; transition:transform 0.3s ease, z-index 0.3s ease;}
.card img:hover {transform:scale(1.6); z-index:10; position:relative; box-shadow:0 10px 20px rgba(0,0,0,0.3);}
.controls {display:none; justify-content:center; gap:0.4rem; margin-bottom:1rem; flex-wrap:wrap;}
.controls button, .controls label {background-color:#2980b9; color:white; border:none; padding:0.3rem 0.7rem; font-size:0.85rem; border-radius:4px; cursor:pointer; transition:background-color 0.2s;}
.controls button:hover, .controls label:hover {background-color:#3498db;}
.link-input {width:90%; padding:0.4rem; border:1px solid #ccc; border-radius:4px; margin-bottom:0.5rem; display:none;}
.link-display a {color:#2980b9; text-decoration:none; font-weight:bold;}
.link-display a:hover {text-decoration:underline;}
.note {text-align:center; font-size:0.95rem; color:#555; margin-top:2rem;}
footer {text-align:center; padding:1rem; color:#777; font-size:0.9rem;}
#editBtn {display:block; margin:1rem auto; padding:0.5rem 1.5rem; background-color:#2980b9; color:white; border:none; border-radius:5px; cursor:pointer;}
#editBtn:hover {background-color:#3498db;}
</style>
</head>
<body>

<header>
<h1>Racon Multiservice</h1>
<p>Your gateway to amazing products from trusted companies.</p>
</header>

<button id="editBtn">Editar contenido</button>

<main>
<section class="gallery">
  <!-- 5 tarjetas -->
  <div class="card" data-slot="1"><img alt="Slot 1"/><div class="controls"><label for="upload1">Add</label><input type="file" id="upload1" accept="image/*" hidden><button class="remove-btn">Remove</button></div><input type="text" class="link-input" placeholder="Enter link"/><div class="link-display"></div></div>
  <div class="card" data-slot="2"><img alt="Slot 2"/><div class="controls"><label for="upload2">Add</label><input type="file" id="upload2" accept="image/*" hidden><button class="remove-btn">Remove</button></div><input type="text" class="link-input" placeholder="Enter link"/><div class="link-display"></div></div>
  <div class="card" data-slot="3"><img alt="Slot 3"/><div class="controls"><label for="upload3">Add</label><input type="file" id="upload3" accept="image/*" hidden><button class="remove-btn">Remove</button></div><input type="text" class="link-input" placeholder="Enter link"/><div class="link-display"></div></div>
  <div class="card" data-slot="4"><img alt="Slot 4"/><div class="controls"><label for="upload4">Add</label><input type="file" id="upload4" accept="image/*" hidden><button class="remove-btn">Remove</button></div><input type="text" class="link-input" placeholder="Enter link"/><div class="link-display"></div></div>
  <div class="card" data-slot="5"><img alt="Slot 5"/><div class="controls"><label for="upload5">Add</label><input type="file" id="upload5" accept="image/*" hidden><button class="remove-btn">Remove</button></div><input type="text" class="link-input" placeholder="Enter link"/><div class="link-display"></div></div>
</section>
<p class="note">To buy, please click the link under each picture.</p>
</main>

<footer>&copy; 2025 Racon Multiservice. All rights reserved.</footer>

<script src="https://apis.google.com/js/api.js"></script>
<script>
const SHEET_ID = "10CD1tdzFXI-Sdvvi3rEF5OLmCjdr3_QOA3oQTfwhhvc";
const API_KEY = "TU_API_KEY"; // <-- reemplaza aquí con tu API Key
let loggedIn=false;

// Inicializar API
function initClient(){
  gapi.client.init({apiKey:API_KEY, discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]})
  .then(()=>loadData());
}
gapi.load('client', initClient);

// Leer datos y actualizar galería
function loadData(){
  gapi.client.sheets.spreadsheets.values.get({
    spreadsheetId:SHEET_ID,
    range:"Sheet1!A2:C6"
  }).then(resp=>{
    const values = resp.result.values || [];
    document.querySelectorAll('.card').forEach((card,i)=>{
      const img=card.querySelector('img');
      const linkDisplay=card.querySelector('.link-display');
      if(values[i]){
        if(values[i][1]) img.src=values[i][1];
        else img.src=`https://via.placeholder.com/250x180.png?text=Slot+${i+1}`;
        if(values[i][2]) linkDisplay.innerHTML=`<a href="${values[i][2]}" target="_blank">Go to link</a>`;
      }
    });
  });
}

// Guardar cambios en la hoja
function saveData(slot,imageUrl,linkUrl){
  const row=slot+1;
  const values=[[slot,imageUrl,linkUrl]];
  gapi.client.sheets.spreadsheets.values.update({
    spreadsheetId:SHEET_ID,
    range:`Sheet1!A${row}:C${row}`,
    valueInputOption:'RAW',
    resource:{values:values}
  }).then(()=>console.log("Guardado en Sheets"))
    .catch(err=>console.log("Error guardando:",err));
}

// Botón editar
document.getElementById("editBtn").addEventListener("click",()=>{
  const user = prompt("Ingresa tu usuario:");
  if(user==="teacheralex62"){
    loggedIn=true;
    document.querySelectorAll(".controls").forEach(c=>c.style.display="flex");
    document.querySelectorAll(".link-input").forEach(i=>i.style.display="block");
    alert("Modo edición activado");
  } else alert("Usuario incorrecto");
});

// Eventos para subir/remover imágenes y links
document.querySelectorAll('.card').forEach((card,i)=>{
  const slot=i+1;
  const img=card.querySelector('img');
  const uploadInput=card.querySelector('input[type="file"]');
  const removeBtn=card.querySelector('.remove-btn');
  const linkInput=card.querySelector('.link-input');
  const linkDisplay=card.querySelector('.link-display');

  uploadInput.addEventListener('change', e=>{
    if(!loggedIn) return alert("Solo el usuario puede editar.");
    const file=e.target.files[0];
    if(file){
      const reader=new FileReader();
      reader.onload=ev=>{
        img.src=ev.target.result;
        saveData(slot,ev.target.result,linkInput.value || "");
      };
      reader.readAsDataURL(file);
    }
  });

  removeBtn.addEventListener("click",()=>{
    if(!loggedIn) return alert("Solo el usuario puede editar.");
    img.src=`https://via.placeholder.com/250x180.png?text=Slot+${slot}`;
    saveData(slot,"",linkInput.value || "");
  });

  linkInput.addEventListener("change",()=>{
    if(!loggedIn) return alert("Solo el usuario puede editar.");
    saveData(slot,img.src,linkInput.value || "");
    linkDisplay.innerHTML=`<a href="${linkInput.value}" target="_blank">Go to link</a>`;
  });
});

// Refrescar datos cada 5 segundos para visitantes
setInterval(()=>{
  if(!loggedIn) loadData();
},5000);
</script>
</body>
</html>
